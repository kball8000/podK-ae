{"changed":true,"filter":false,"title":"helloworld.py","tooltip":"/helloworld.py","value":"from google.appengine.api import users\nfrom google.appengine.ext import ndb\nimport webapp2\nimport urllib\nimport urllib2\nimport xml.etree.ElementTree as ET\nimport json\n# import html\n# import cgi\n\n# TO DO:\n# Redo buttons so jQuery adds an event listener.\n# Would like to make less queries, so all podcast feeds should be in a list\n# Add keyboard shortcuts for controlling player. Probably need to add a click event to the body or html entity.\n# then all episode information for each show could be in 1 entity\n# Ask huber if how I\"m handling controls is proper. Seems odd to have urls as 'controls', i.e. to remove feeds.\n# Put an are you sure / undo / store removed shows somewhere / maybe even a remove forever button once it's on the removed list.\n# Create a current playing object. I'll write that to datastore often, but only update the episode object every so often.\n# Keeps adding add podcast after I submit. Refreshes to just one on page reload\n\n# Additional features\n# After hitting stop, it turns into an undo button... for a while.\n\n\n# **-- Need to store:  --**\n# \n# podcast rss feeds in array (i'm not clear why i'm storing them separately, will probably move to show object\n#   (maybe there will be a speed advantage, but at the moment, I can't think of one.)\n# \n# object of each show including (on average probably 5 - 10 of these) - This is what we will store in datastore\n#   rss feed\n#   show name\n#   show hosts???\n#   episode object (1 - 100)\n#     episode name\n#     episode url\n#     listened boolean\n#     last listened location\n#     episode length???\n\nFORM_HTML = \"\"\"\\\n<form action=\"/addpodcast\" method=\"post\">\n    <div><input type='text' name='formContent' style='width:50em'></input></div>\n    <div><input type=\"submit\" value = \"Add podcast\"></div>\n</form>\n<div id='searchResultHtml'></div>\n\"\"\"\n\n# In order to use guestbook example, this is a cross reference list\n# Greeting          = PodcastFeed\n# guestbook_name    = podcast_feed_list = default_podcast_feed_list\n# 'Guestbook'       = 'podcast_feed_list' for nbd\n# greetings         = podcast_feeds\n# greeting          = podcast_feed\n\nMUSIC_CONTROLS_HTML = \"\"\"\\\n    <div>\n        <audio controls id='%s'>\n            <source src='%s'>\n        </audio>\n    </div>\n    <div>\n     \t<button class=\"ui-btn ui-btn-inline\" onclick=\"myAudio.playAudio();\">&#9654 / &#8214 A</button>\n    \t<button class=\"ui-btn ui-btn-inline\" onclick=\"myAudio.stopAudio();\">&#11035</button>\n    \t<button class=\"ui-btn ui-btn-inline\" onclick=\"myAudio.displayTime();\">Get Time</button>\n    \t<button class=\"ui-btn ui-btn-inline\" onclick=\"myAudio.rewind();\"><</button>\n    \t<button class=\"ui-btn ui-btn-inline\" onclick=\"myAudio.fastForward();\">></button>\n    \t<button class=\"ui-btn ui-btn-inline\" onclick='myAudio.toggleSound()' id='speakerIcon'>&#128266</button>\n    </div>\n    <div>\n    \tCurrent time is <span id='currentGibTime' style='height:2em;'></span><br>\n    \tTotal time is <span id='durationGibTIme' style='height:2em;'></span><br>\n    </div>\n\"\"\"\n\nDEFAULT_PODCAST_FEED_LIST = 'default_podcast_feed_list'\n# http://feeds.twit.tv/twit.xml\n# http://feeds.twit.tv/sn.xml\n# http://feeds.twit.tv/hn.xml\n\ndef podcast_feed_key(podcast_feed=DEFAULT_PODCAST_FEED_LIST):\n    return ndb.Key('podcast_feed', podcast_feed)\n\nclass Episode(ndb.Model):\n    title = ndb.StringProperty()\n    listened = ndb.BooleanProperty()\n    episodeLength = ndb.IntegerProperty() # in milliseconds\n    playbackPosition = ndb.IntegerProperty() # in milliseconds\n\nclass Podcast(ndb.Model):\n    author = ndb.UserProperty()\n    title = ndb.StringProperty(indexed=False)\n    feedUrl = ndb.StringProperty(indexed=False)\n    show = ndb.StructuredProperty(Episode, repeated=True)\n    date = ndb.DateTimeProperty(auto_now_add=True)\n\nclass MainPage(webapp2.RequestHandler):\n    def get(self):\n        \n        user = users.get_current_user()\n\n        self.response.headers['Content-Type'] = 'text/html'\n        self.response.write('<html><body><head>')\n\n        # HTML header \n        self.response.write('<link rel=\"stylesheet\" href=\"//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.min.css\" />')\n        self.response.write('<script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js\"></script>')\n        self.response.write('<script src=\"//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.3/jquery.mobile.min.js\"></script>')\n        self.response.write('<link type=\"text/css\" rel=\"stylesheet\" href=\"/stylesheets/helloworld.css\">')\n        self.response.write('<script src=\"/scripts/podKTop.js\"></script>')\n        self.response.write('</head>')\n\n        # Heading 1\n        self.response.write('<h1>PodKatchor</h1>')\n        self.response.write('<h2>Pretty much the best online podcast player</h2>')\n\n        #Have user log in and show their current subscriptions.\n        if user:\n            self.response.write('Welcome %s! (<a href=\"%s\">Logout</a>) <br>' % (user.nickname(), users.create_logout_url(self.request.uri)))\n        else:\n            self.response.write('<a href=\"%s\">Sign In</a> with your Google account<br>' % users.create_login_url(self.request.uri))\n\n        podcast_feed_list = self.request.get('podcast_feed', DEFAULT_PODCAST_FEED_LIST)\n        \n        podcast_feed_query = Podcast.query(ancestor = podcast_feed_key(podcast_feed_list)).order(-Podcast.date)\n        podcast_feeds = podcast_feed_query.fetch(10)\n\n        self.response.write('<br><a href=\"/testpagelink\">Run test link page</a><br>')\n        self.response.write('<br><a href=\"/second\">Go to page to for testing datastore</a><br>')\n\n        self.response.write('<br><br>**Current saved feeds from datastore:<br>')\n        shows = xrange(3)\n\n        playerName = 'myMusic1'\n        defaultEp = 'http://www.podtrac.com/pts/redirect.mp3/twit.cachefly.net/audio/sn/sn0462/sn0462.mp3'\n        selectedEp = 'http://www.podtrac.com/pts/redirect.mp3/twit.cachefly.net/audio/twig/twig0257/twig0257.mp3'\n\n        for feed in podcast_feeds:\n            self.response.write('<form action=\"/rempodcast\" method=\"post\"> %s <input type=\"hidden\" name=\"delRecord\" value=\"%s\"><input type=\"submit\" \\\n            value=\"x\" data-inline=\"true\"></form>' % (feed.feedUrl, feed.key.id()))\n            self.response.write('<form action=\"/refreshfeed\" method=\"post\"><input type=\"hidden\" name=\"refreshFeed\" value=\"%s\"><input type=\"submit\" \\\n            value=\"&#8635\" data-inline=\"true\"></form>' % feed.feedUrl)\n            self.response.write('<div class=\"podcastFeedList\"><ul>')\n            for show in shows:\n                self.response.write(\"\"\"<li>Episode %s <a onclick=\"myAudio.playSelectedEpisode('%s')\" class=\"playButton\">&#9658</a> \\\n                </li>\"\"\" % (feed.title, selectedEp))\n            self.response.write('</ul></div>')\n            \n        # Music player, move player vars down once I have above feed for loop not requiring it.\n        self.response.write(MUSIC_CONTROLS_HTML % (playerName, defaultEp))\n\n        # Search iTunes for podcast\n        self.response.write('<input id=\"iTunesSearchValue\" type=\"text\" placeholder=\"Search iTunes Store\" data-inline=\"true\"/>')\n        self.response.write('<button id=\"iTunesSearchButton\" data-inline=\"true\">Go</button>')\n        self.response.write('<div id=\"iTunesSearchResultsHtml\"></div>')\n        # self.response.write('<form method=\"post\" action=\"/searchITunes\"><input type=\"text\" name=\"searchITunes\"><input type=\"submit\" value=\"Search\"></form>')\n        # self.response.write('<form method=\"get\" name=\"itunesSearchForm\" action=\"#\"><input type=\"text\" name=\"iTunesSearchValue\"><input type=\"submit\" onclick=\"sendITunesSearchRequest()\" value=\"Search\"></form>')\n\n        # How to write to the javascript console log in the browser\n        # self.response.write('<script>console.log(\"Logging is working: %s\")</script>' % podcast_feed_list)\n\n        self.response.write('http://feeds.twit.tv/sn.xml ep 456 at 12 min<br>')\n        self.response.write('Swap out the \"sn\" with \"twig\" / \"twit\" / \"mbw\" or any other twit show to try out other feeds<br>')\n        self.response.write(FORM_HTML)\n        self.response.write('<script src=\"/scripts/podK.js\"></script>')\n        self.response.write('</body></html>')\n\nclass TestPageLink(webapp2.RequestHandler):\n    def get(self):\n        podcast_feed_list = self.request.get('podcast_feed', DEFAULT_PODCAST_FEED_LIST)\n        podcast_feed_query = Podcast.query(ancestor = podcast_feed_key(podcast_feed_list)).order(-Podcast.date)\n        podcast_feeds = podcast_feed_query.fetch(10)\n\n        # shows = xrange(3)\n\n        selectedEp = 'http://www.podtrac.com/pts/redirect.mp3/twit.cachefly.net/audio/twig/twig0257/twig0257.mp3'\n\n        for feed in podcast_feeds:\n            feed.title = 'junk'\n            feed.put()\n        \n        self.redirect('/')\n\nclass AddPodcast(webapp2.RequestHandler):\n    def post(self):\n        podcast_feed_list = self.request.get('podcast_feed_list', DEFAULT_PODCAST_FEED_LIST)\n\n        # Create the constructor\n        podcast = Podcast(parent=podcast_feed_key(podcast_feed_list))\n\n        # Add parameters\n        if users.get_current_user():\n            podcast.author = users.get_current_user()\n            \n        podcast.feedUrl = self.request.get('formContent')\n        podcast.show = [Episode(title='year', listened=False),]\n\n        podcast.put()\n\n        self.redirect('/')\n\nclass SearchITunes(webapp2.RequestHandler):\n    def post(self):\n\n        searchRequest = self.request.get('searchITunes')\n        url = 'https://itunes.apple.com/search'\n        queryArgs = {'term':searchRequest, 'media':'podcast', 'limit':10}\n        queryArgsEnc = urllib.urlencode(queryArgs)\n        request = urllib2.Request(url, queryArgsEnc)\n        response = urllib2.urlopen(request)\n        data = json.loads(response.read())\n        for i in xrange(data['resultCount']):\n            self.response.write('<br>artist name: %s, collection name: %s' % (data['results'][i]['artistName'], data['results'][i]['collectionName']))\n            self.response.write('<form action=\"/addpodcast\" method=\"post\"><input type=\"submit\" value=\"add\" name = \"%s\"></form>' % data['results'][i]['collectionName']) \n\n        self.response.headers['Content-Type'] = 'text/html'\n        self.response.write('<html><body><head>')\n        self.response.write('<link type=\"text/css\" rel=\"stylesheet\" href=\"/stylesheets/helloworld.css\">')\n        self.response.write('</head>')\n        self.response.write('Search Request: %s<br>' % searchRequest)\n        self.response.write('url: %s<br>' % url)\n        self.response.write('queryArgs: %s<br>' % searchRequestEnc)\n        self.response.write('Results:<br>')\n        # self.response.write(readResponse['results'][0]['artistName'])\n        self.response.write(readResponse['results'])\n        self.response.write('<br><br>Results:<br>')\n        self.response.write(readResponse)\n\n        self.response.write('</body></html>')\n\nclass RefreshFeed(webapp2.RequestHandler):\n    def post(self):\n        \n        self.response.headers['Content-Type'] = 'text/html'\n        self.response.write('<html><body><head>')\n        self.response.write('<link type=\"text/css\" rel=\"stylesheet\" href=\"/stylesheets/helloworld.css\">')\n        self.response.write('</head>')\n\n        url = self.request.get('refreshFeed')\n        request = urllib2.Request(url)\n        try:\n            response = urllib2.urlopen(request).read()\n        except urllib2.URLError, e:\n            self.response.write('could not refresh feed')\n            \n        root = ET.fromstring(response)\n        self.response.write('Show title: <h2>%s</h2><br><br>' %(root.find('channel').find('title').text))\n        for item in root.find('channel').findall('item'):\n            self.response.write('Episode title: <h3>%s</h3>, published on: %s<br>' %(item.find('title').text, item.find('pubDate').text))\n\n        self.response.write('</body></html>')\n\n        # self.redirect('/')\n\nclass RemPodcast(webapp2.RequestHandler):\n    def post(self):\n        \n        # Get id from post request and delete that show from list. \n        # Also double checks with user,  by way of javascript that they really want to do this.\n    \n        feed_id = self.request.get('delRecord')\n        \n        podcast_feed = ndb.Key(Podcast, int(feed_id), parent=ndb.Key('podcast_feed', 'default_podcast_feed_list'))\n        podcast_feed.delete()\n        \n        self.redirect('/')\n        \nclass SecondPage(webapp2.RequestHandler):\n    def get(self):\n        \n        # user = users.get_current_user()\n\n        self.response.headers['Content-Type'] = 'text/html'\n        self.response.write('<html><body><head>')\n        self.response.write('<link type=\"text/css\" rel=\"stylesheet\" href=\"/stylesheets/helloworld.css\">')\n        # self.response.write('<link rel=\"stylesheet\" href=\"https://dl.dropboxusercontent.com/u/4597121/podcatchor/styles/podK.css\">')\n        self.response.write('</head>')\n        self.response.write('<a href=\"http://kball-test-tools.appspot.com/\">Main page</a><br><br>')\n\n\n# def podcast_feed_key(podcast_feed=DEFAULT_PODCAST_FEED_LIST):\n#     return ndb.Key('podcast_feed', podcast_feed)\n\n        # podcast_feed_list = self.request.get('podcast_feed', DEFAULT_PODCAST_FEED_LIST)\n        podcast_feed_list = 'default_podcast_feed_list'\n        self.response.write('podcast feed list var = %s <br><br>' % podcast_feed_list)\n        # podcast_feed_list = {'podcastA', 'podcastVar'}\n \n        # podcast_feed_query = Podcast.query(ancestor = podcast_feed_key(podcast_feed_list)).order(-Podcast.date)\n        podcast_feed_query = Podcast.query(ancestor = ndb.Key('podcast_feed', podcast_feed_list)).order(-Podcast.date)\n        # podcast_feed_query = Podcast.query()\n        podcast_feeds = podcast_feed_query.fetch()\n\n        self.response.write('<br><br>**Current saved feeds from datastore ** E ** :<br>')\n        # shows = xrange(3)\n\n        for feed in podcast_feeds:\n            self.response.write('feed url: %s and feed id: %s <br>' % (feed.feedUrl, feed.key.id()))\n\n        # if user:\n        #     self.response.write('<h1>Hello, %s, you are logged in!B</h1>' % user.nickname())\n        #     # self.response.write('Hello, %s (<a href=\"%s\">Sign out</a>)' % (user.nickname(), users.create_logout_url('/'))\n        # else:\n        #     self.redirect(users.create_login_url(self.request.uri))\n        #     # self.response.write('You are not logged in <a href=\"%s\">Click here to login</a>' % users.create_login_url(self.request.uri)\n\n        # x1 = 'myMusic1'\n        # x2 = 'http://www.podtrac.com/pts/redirect.mp3/twit.cachefly.net/audio/sn/sn0462/sn0462.mp3'\n        # self.response.write(MUSIC_CONTROLS_HTML % (x1, x2))\n\n        self.response.write('<script src=\"/scripts/podK.js\"></script>')\n        self.response.write('</body></html>')\n\napp = webapp2.WSGIApplication([\n    (r'/', MainPage),\n    (r'/addpodcast', AddPodcast),\n    ('/rempodcast', RemPodcast),\n    ('/searchITunes', SearchITunes),\n    # (r'/rempodcast/(\\d+)', remPodcastFeed),\n    ('/refreshfeed', RefreshFeed),\n    ('/second', SecondPage),\n    ('/testpagelink', TestPageLink),\n], debug=True)","undoManager":{"mark":88,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":22},"end":{"row":287,"column":23}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":23},"end":{"row":287,"column":24}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":24},"end":{"row":287,"column":25}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":25},"end":{"row":287,"column":26}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":26},"end":{"row":287,"column":27}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":27},"end":{"row":287,"column":28}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":28},"end":{"row":287,"column":29}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":29},"end":{"row":287,"column":30}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":30},"end":{"row":287,"column":31}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":31},"end":{"row":287,"column":32}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":32},"end":{"row":287,"column":33}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":33},"end":{"row":287,"column":34}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":287,"column":34},"end":{"row":287,"column":35}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":77},"end":{"row":289,"column":78}},"text":"C"},{"action":"insertText","range":{"start":{"row":289,"column":77},"end":{"row":289,"column":78}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":285,"column":0},"end":{"row":285,"column":111}},"text":"        podcast_feed_query = Podcast.query(ancestor = podcast_feed_key(podcast_feed_list)).order(-Podcast.date)"},{"action":"insertText","range":{"start":{"row":285,"column":111},"end":{"row":286,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":284,"column":8},"end":{"row":284,"column":10}},"text":"# "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":70},"end":{"row":285,"column":71}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":69},"end":{"row":285,"column":70}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":68},"end":{"row":285,"column":69}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":67},"end":{"row":285,"column":68}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":66},"end":{"row":285,"column":67}},"text":"_"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":65},"end":{"row":285,"column":66}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":64},"end":{"row":285,"column":65}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":63},"end":{"row":285,"column":64}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":62},"end":{"row":285,"column":63}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":61},"end":{"row":285,"column":62}},"text":"_"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":60},"end":{"row":285,"column":61}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":59},"end":{"row":285,"column":60}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":58},"end":{"row":285,"column":59}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":57},"end":{"row":285,"column":58}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":56},"end":{"row":285,"column":57}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":55},"end":{"row":285,"column":56}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":54},"end":{"row":285,"column":55}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":285,"column":71},"end":{"row":285,"column":72}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":285,"column":54},"end":{"row":285,"column":59}},"text":"podca"},{"action":"insertText","range":{"start":{"row":285,"column":76},"end":{"row":285,"column":77}},"text":")"},{"action":"removeText","range":{"start":{"row":285,"column":54},"end":{"row":285,"column":59}},"text":"podca"},{"action":"removeText","range":{"start":{"row":285,"column":72},"end":{"row":285,"column":73}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":0},"end":{"row":289,"column":1}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":0},"end":{"row":289,"column":1}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":279,"column":0},"end":{"row":280,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":280,"column":0},"end":{"row":281,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":281,"column":0},"end":{"row":282,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":280,"column":0},"end":{"row":280,"column":61}},"text":"def podcast_feed_key(podcast_feed=DEFAULT_PODCAST_FEED_LIST):"},{"action":"insertText","range":{"start":{"row":280,"column":61},"end":{"row":281,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":281,"column":0},"end":{"row":282,"column":0}},"lines":["    return ndb.Key('podcast_feed', podcast_feed)"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":280,"column":0},"end":{"row":280,"column":2}},"text":"# "},{"action":"insertText","range":{"start":{"row":281,"column":0},"end":{"row":281,"column":2}},"text":"# "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":283,"column":0},"end":{"row":283,"column":1}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":283,"column":0},"end":{"row":283,"column":1}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":282,"column":0},"end":{"row":283,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":54},"end":{"row":289,"column":55}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":55},"end":{"row":289,"column":56}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":56},"end":{"row":289,"column":57}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":57},"end":{"row":289,"column":58}},"text":">"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":57},"end":{"row":289,"column":58}},"text":">"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":57},"end":{"row":289,"column":58}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":58},"end":{"row":289,"column":59}},"text":"K"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":59},"end":{"row":289,"column":60}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":60},"end":{"row":289,"column":61}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":61},"end":{"row":289,"column":62}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":62},"end":{"row":289,"column":63}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":63},"end":{"row":289,"column":64}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":64},"end":{"row":289,"column":65}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":65},"end":{"row":289,"column":66}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":66},"end":{"row":289,"column":67}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":67},"end":{"row":289,"column":68}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":68},"end":{"row":289,"column":69}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":69},"end":{"row":289,"column":70}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":70},"end":{"row":289,"column":71}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":70},"end":{"row":289,"column":71}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":70},"end":{"row":289,"column":71}},"text":"_"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":71},"end":{"row":289,"column":72}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":72},"end":{"row":289,"column":73}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":73},"end":{"row":289,"column":74}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":74},"end":{"row":289,"column":75}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":75},"end":{"row":289,"column":76}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":76},"end":{"row":289,"column":77}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":77},"end":{"row":289,"column":78}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":292,"column":0},"end":{"row":293,"column":0}},"nl":"\n","lines":["        self.response.write('blah')"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":96},"end":{"row":289,"column":97}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":73},"end":{"row":289,"column":74}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":293,"column":77},"end":{"row":293,"column":78}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":293,"column":77},"end":{"row":293,"column":78}},"text":"E"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":72},"end":{"row":289,"column":73}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":72},"end":{"row":289,"column":73}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":73},"end":{"row":289,"column":74}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":74},"end":{"row":289,"column":75}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":75},"end":{"row":289,"column":76}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":76},"end":{"row":289,"column":77}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":77},"end":{"row":289,"column":78}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":78},"end":{"row":289,"column":79}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":79},"end":{"row":289,"column":80}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":80},"end":{"row":289,"column":81}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":81},"end":{"row":289,"column":82}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":81},"end":{"row":289,"column":82}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":80},"end":{"row":289,"column":81}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":79},"end":{"row":289,"column":80}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":78},"end":{"row":289,"column":79}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":77},"end":{"row":289,"column":78}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":76},"end":{"row":289,"column":77}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":75},"end":{"row":289,"column":76}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":74},"end":{"row":289,"column":75}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":73},"end":{"row":289,"column":74}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":289,"column":72},"end":{"row":289,"column":73}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":72},"end":{"row":289,"column":73}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":289,"column":73},"end":{"row":289,"column":74}},"text":"e"}]}]]},"ace":{"folds":[{"start":{"row":83,"column":25},"end":{"row":87,"column":62},"placeholder":"..."},{"start":{"row":89,"column":25},"end":{"row":94,"column":50},"placeholder":"..."},{"start":{"row":96,"column":39},"end":{"row":165,"column":45},"placeholder":"..."},{"start":{"row":167,"column":43},"end":{"row":181,"column":26},"placeholder":"..."},{"start":{"row":183,"column":41},"end":{"row":199,"column":26},"placeholder":"..."},{"start":{"row":201,"column":43},"end":{"row":228,"column":45},"placeholder":"..."},{"start":{"row":230,"column":42},"end":{"row":252,"column":28},"placeholder":"..."},{"start":{"row":254,"column":41},"end":{"row":265,"column":26},"placeholder":"..."}],"scrolltop":1560,"scrollleft":0,"selection":{"start":{"row":289,"column":74},"end":{"row":289,"column":74},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":271,"state":"start","mode":"ace/mode/python"}},"timestamp":1406378010093}